<!DOCTYPE html>
<html lang="en" class="admin">
<head>
    <link href="{{ url_for('static', filename='css/admin.css') }}" type="text/css" rel="stylesheet">
    <link href="{{ url_for('home') }}" rel="home">
    <script src="{{ url_for('static', filename='js/admin.js') }}" defer></script>
</head>
<header>
    <h1>Admin Dashboard</h1>
    <div class="header-controls">
        <a href="{{ url_for('home') }}" class="nav-btn">Home</a>
        <button id="logoutBtn" class="logout-btn">Logout</button>
    </div>
</header>

<div class="section">
<h1>Monthly Report</h1>
<p id="currentMonth">Month: Loading...</p>
<h2>Membership Overview</h2>
<table id="membershipTable">
  <tr>
    <th>Category</th>
    <th>Count</th>
  </tr>
  <tr>
    <td>New Members</td>
    <td id="newMembers">Loading...</td>
  </tr>
  <tr>
    <td>Renewals</td>
    <td id="renewals">Loading...</td>
  </tr>
  <tr>
    <td>Total Active Members</td>
    <td id="totalMembers">Loading...</td>
  </tr>
</table>

<h2>Financial Summary</h2>
<table id="financialTable">
  <tr>
    <th>Description</th>
    <th>Amount (USD)</th>
  </tr>
  <tr>
    <td>Membership Revenue</td>
    <td id="membershipRevenue">Loading...</td>
  </tr>
  <tr>
    <td>Class Revenue</td>
    <td id="classRevenue">Loading...</td>
  </tr>
  <tr>
    <td>Merchandise Sales</td>
    <td id="merchandiseSales">Loading...</td>
  </tr>
  <tr>
    <td><strong>Total Revenue</strong></td>
    <td class="total-revenue" id="totalRevenue"><strong>Loading...</strong></td>
  </tr>
</table>
</div>


<div class="container">
    <form id="newClassForm">
        <label for="className">Class Name:</label>
        <input type="text" id="className" name="className" required>

        <label for="instructor">Instructor:</label>
        <input type="text" id="instructor" name="instructor" required>

        <label for="classDate">Class Date and Time:</label>
        <input type="datetime-local" id="classDate" name="classDate" required>

        <label for="classCapacity">Class Capacity:</label>
        <input type="number" id="classCapacity" name="classCapacity" min="1" required>

            <button type="submit">Add Class</button>
        </form>

        <h3>Class Sizes & Open Spots</h3>
        <ul id="classList"> 
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Class Name</th>
                            <th>Instructor</th>
                            <th>Date & Time</th>
                            <th>Capacity</th>
                            <th>Current Bookings</th>
                            <th>Open Spots</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <div class="pagination">
                    <button id="prevPage" class="pagination-btn">Previous</button>
                    <span id="pageInfo">Page 1 of 1</span>
                    <button id="nextPage" class="pagination-btn">Next</button>
                </div>
            </div>
        </ul>
    </div>

    <h2>Repair Orders</h2>
    <div class="table-container">
        <table id="repairReportsTable">
            <thead>
                <tr>
                    <th>Equipment</th>
                    <th>Issue</th>
                    <th>Reported By</th>
                    <th>Date</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows will be added dynamically -->
            </tbody>
        </table>
    </div>


    <h2>Employee Management</h2>
    <div class="employee-controls">
        <select id="roleSelect">
            <option value="">Select New Role</option>
            <option value="admin">Admin</option>
            <option value="trainer">Trainer</option>
            <option value="member">Member</option>
            <option value="non_member">Non-Member</option>
        </select>
        <button id="updateRoleBtn" class="btn-secondary" onclick="updateEmployeeRole()">Update Role</button>
        <button id="deleteEmployeeBtn" class="btn-danger" onclick="deleteEmployee()">Delete Employee</button>
    </div>
    <div class="table-container">
        <table id="employeeTable">
            <thead>
                <tr>
                    <th>Select</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Current Role</th>
                    <th>Tenure</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows will be added dynamically -->
            </tbody>
        </table>
    </div>

    <h2>User Management</h2>
    <div class="user-controls">
        <select id="userRoleSelect">
            <option value="">Select New Role</option>
            <option value="admin">Admin</option>
            <option value="trainer">Trainer</option>
            <option value="member">Member</option>
            <option value="non_member">Non-Member</option>
        </select>
        <button id="updateUserRoleBtn" class="btn-secondary" onclick="updateUserRole()">Update Role</button>
        <button id="deleteUserBtn" class="btn-danger" onclick="deleteUser()">Delete User</button>
    </div>
    <div class="table-container">
        <table id="userTable">
            <thead>
                <tr>
                    <th>Select</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Current Role</th>
                    <th>Membership Expiry</th>
                    <th>Auto Payment</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows will be added dynamically -->
            </tbody>
        </table>
    </div>

    <h4>Monthly Report</h4>
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Rent</th>
                    <th>Payroll</th>
                    <th>Income</th>
                    <th>Earnings</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>$2,000</td>
                    <td>$2,000</td>
                    <td>$6,000</td>
                    <td>$2,000</td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>
